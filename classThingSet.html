<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>ThingSet protocol C++ client library: ThingSet Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ThingSet protocol C++ client library
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classThingSet.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">ThingSet Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="thingset_8h_source.html">thingset.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad0e77f5c89ae8cadd66ee745f8d530a8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#ad0e77f5c89ae8cadd66ee745f8d530a8">ThingSet</a> (<a class="el" href="structDataNode.html">DataNode</a> *data, size_t num)</td></tr>
<tr class="separator:ad0e77f5c89ae8cadd66ee745f8d530a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58ea7684325617d69877eca2742e7a2d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#a58ea7684325617d69877eca2742e7a2d">process</a> (uint8_t *request, size_t <a class="el" href="classThingSet.html#a25a5f618bc4d84f1e5c60cd92d67d48d">req_len</a>, uint8_t *response, size_t <a class="el" href="classThingSet.html#ae81f4618d6ab0d822d53fef844820162">resp_size</a>)</td></tr>
<tr class="separator:a58ea7684325617d69877eca2742e7a2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaca336b57676e947f2e01091698253ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#aaca336b57676e947f2e01091698253ac">dump_json</a> (node_id_t node_id=0, int level=0)</td></tr>
<tr class="separator:aaca336b57676e947f2e01091698253ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fbc26746589326ce1268b2a8ded711d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#a1fbc26746589326ce1268b2a8ded711d">set_authentication</a> (uint16_t flags)</td></tr>
<tr class="separator:a1fbc26746589326ce1268b2a8ded711d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76b1ba323d6a9d29c50170bd487a85f2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#a76b1ba323d6a9d29c50170bd487a85f2">txt_pub</a> (char *buf, size_t size, const uint16_t pub_ch)</td></tr>
<tr class="separator:a76b1ba323d6a9d29c50170bd487a85f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a249c640ceb791a22fc3453df5b7b3587"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#a249c640ceb791a22fc3453df5b7b3587">bin_pub</a> (uint8_t *buf, size_t size, const uint16_t pub_ch)</td></tr>
<tr class="separator:a249c640ceb791a22fc3453df5b7b3587"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa91369c2a5bcb8b401865a65a753bb8d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#aa91369c2a5bcb8b401865a65a753bb8d">bin_pub_can</a> (int &amp;start_pos, uint16_t pub_ch, uint8_t can_dev_id, uint32_t &amp;msg_id, uint8_t(&amp;msg_data)[8])</td></tr>
<tr class="separator:aa91369c2a5bcb8b401865a65a753bb8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96183b7833a9101dc1d7f050e604d0e8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#a96183b7833a9101dc1d7f050e604d0e8">bin_sub</a> (uint8_t *cbor_data, size_t len, uint16_t auth_flags, uint16_t sub_ch)</td></tr>
<tr class="separator:a96183b7833a9101dc1d7f050e604d0e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c63da204a79bf3c9b9314eae21cd62d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structDataNode.html">DataNode</a> *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#a1c63da204a79bf3c9b9314eae21cd62d">get_node</a> (node_id_t id)</td></tr>
<tr class="separator:a1c63da204a79bf3c9b9314eae21cd62d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f8a5788831fb678e24af134e90a375c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structDataNode.html">DataNode</a> *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#a7f8a5788831fb678e24af134e90a375c">get_node</a> (const char *name, size_t len, int32_t parent=-1)</td></tr>
<tr class="separator:a7f8a5788831fb678e24af134e90a375c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abed56f30c7614d2c5231c2201b33be88"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structDataNode.html">DataNode</a> *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#abed56f30c7614d2c5231c2201b33be88">get_endpoint</a> (const char *path, size_t len)</td></tr>
<tr class="separator:abed56f30c7614d2c5231c2201b33be88"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a7f43e789d44edb00566cbbff40e88901"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#a7f43e789d44edb00566cbbff40e88901">txt_process</a> ()</td></tr>
<tr class="separator:a7f43e789d44edb00566cbbff40e88901"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5f5205b807e2488ca7cf0599a130218"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#ae5f5205b807e2488ca7cf0599a130218">bin_process</a> ()</td></tr>
<tr class="separator:ae5f5205b807e2488ca7cf0599a130218"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a2c13600f01dee4f4ef570b06d1248c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#a4a2c13600f01dee4f4ef570b06d1248c">txt_get</a> (const <a class="el" href="structDataNode.html">DataNode</a> *parent, bool include_values=false)</td></tr>
<tr class="separator:a4a2c13600f01dee4f4ef570b06d1248c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9db5371544d495121bc2a14e9368d99e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#a9db5371544d495121bc2a14e9368d99e">bin_get</a> (const <a class="el" href="structDataNode.html">DataNode</a> *parent, bool values=false, bool ids_only=true)</td></tr>
<tr class="separator:a9db5371544d495121bc2a14e9368d99e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addb80c0d2f3bf53946e07de39ce94fa4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#addb80c0d2f3bf53946e07de39ce94fa4">txt_fetch</a> (node_id_t parent_id)</td></tr>
<tr class="separator:addb80c0d2f3bf53946e07de39ce94fa4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab062ae679858f515a003f0eeeca5d0d2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#ab062ae679858f515a003f0eeeca5d0d2">bin_fetch</a> (const <a class="el" href="structDataNode.html">DataNode</a> *parent, unsigned int pos_payload)</td></tr>
<tr class="separator:ab062ae679858f515a003f0eeeca5d0d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a873145210e2981bbdd165a31c3c77c72"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#a873145210e2981bbdd165a31c3c77c72">txt_patch</a> (node_id_t parent_id)</td></tr>
<tr class="separator:a873145210e2981bbdd165a31c3c77c72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c796fce364430893bcc06fc6d8e5e8b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#a9c796fce364430893bcc06fc6d8e5e8b">bin_patch</a> (const <a class="el" href="structDataNode.html">DataNode</a> *parent, unsigned int pos_payload, uint16_t auth_flags, uint16_t sub_ch)</td></tr>
<tr class="separator:a9c796fce364430893bcc06fc6d8e5e8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61e40c5206c4ce45b86965a65f6e22db"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#a61e40c5206c4ce45b86965a65f6e22db">txt_create</a> (const <a class="el" href="structDataNode.html">DataNode</a> *node)</td></tr>
<tr class="separator:a61e40c5206c4ce45b86965a65f6e22db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f0ba86633385e312a5e8625199acb3e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#a9f0ba86633385e312a5e8625199acb3e">txt_delete</a> (const <a class="el" href="structDataNode.html">DataNode</a> *node)</td></tr>
<tr class="separator:a9f0ba86633385e312a5e8625199acb3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa904404d23fc65444527c9e27af06719"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#aa904404d23fc65444527c9e27af06719">txt_exec</a> (const <a class="el" href="structDataNode.html">DataNode</a> *node)</td></tr>
<tr class="separator:aa904404d23fc65444527c9e27af06719"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab44eabf502fa6063963cbd50b351e918"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#ab44eabf502fa6063963cbd50b351e918">bin_exec</a> (const <a class="el" href="structDataNode.html">DataNode</a> *node, unsigned int pos_payload)</td></tr>
<tr class="separator:ab44eabf502fa6063963cbd50b351e918"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9eec5c4cb28659c71e2cfafdd922c82"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#ab9eec5c4cb28659c71e2cfafdd922c82">txt_response</a> (int code)</td></tr>
<tr class="separator:ab9eec5c4cb28659c71e2cfafdd922c82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a737394237911cbeed76600d647cf075d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#a737394237911cbeed76600d647cf075d">bin_response</a> (uint8_t code)</td></tr>
<tr class="separator:a737394237911cbeed76600d647cf075d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e15c09d2db7a66c95ac38aa3ba0d690"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#a9e15c09d2db7a66c95ac38aa3ba0d690">json_serialize_value</a> (char *buf, size_t size, const <a class="el" href="structDataNode.html">DataNode</a> *node)</td></tr>
<tr class="separator:a9e15c09d2db7a66c95ac38aa3ba0d690"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae59ffb306312fb11041e7508598fe3f2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#ae59ffb306312fb11041e7508598fe3f2">json_serialize_name_value</a> (char *buf, size_t size, const <a class="el" href="structDataNode.html">DataNode</a> *node)</td></tr>
<tr class="separator:ae59ffb306312fb11041e7508598fe3f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5677bceee74101e3a5221d28643fc7c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#ae5677bceee74101e3a5221d28643fc7c">json_deserialize_value</a> (char *buf, size_t len, jsmntype_t type, const <a class="el" href="structDataNode.html">DataNode</a> *node)</td></tr>
<tr class="separator:ae5677bceee74101e3a5221d28643fc7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:acf513ed2020ca84486cec42ddd1ab44c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structDataNode.html">DataNode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#acf513ed2020ca84486cec42ddd1ab44c">data_nodes</a></td></tr>
<tr class="separator:acf513ed2020ca84486cec42ddd1ab44c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6317041297961833e518cef07accc937"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#a6317041297961833e518cef07accc937">num_nodes</a></td></tr>
<tr class="separator:a6317041297961833e518cef07accc937"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67a2efd895161f6deb533fad60fbf789"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#a67a2efd895161f6deb533fad60fbf789">req</a></td></tr>
<tr class="separator:a67a2efd895161f6deb533fad60fbf789"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25a5f618bc4d84f1e5c60cd92d67d48d"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#a25a5f618bc4d84f1e5c60cd92d67d48d">req_len</a></td></tr>
<tr class="separator:a25a5f618bc4d84f1e5c60cd92d67d48d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ccc8a63ad5208743a7950239f58bdbb"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#a1ccc8a63ad5208743a7950239f58bdbb">resp</a></td></tr>
<tr class="separator:a1ccc8a63ad5208743a7950239f58bdbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae81f4618d6ab0d822d53fef844820162"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#ae81f4618d6ab0d822d53fef844820162">resp_size</a></td></tr>
<tr class="separator:ae81f4618d6ab0d822d53fef844820162"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af01ce89b91046f038ca4323491ba1c6c"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#af01ce89b91046f038ca4323491ba1c6c">json_str</a></td></tr>
<tr class="separator:af01ce89b91046f038ca4323491ba1c6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c1b8fb1d4af283b24cee6079e87ecf8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structjsmntok__t.html">jsmntok_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#a3c1b8fb1d4af283b24cee6079e87ecf8">tokens</a> [TS_NUM_JSON_TOKENS]</td></tr>
<tr class="separator:a3c1b8fb1d4af283b24cee6079e87ecf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8291d6284820b284f03f2f92a7a523fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#a8291d6284820b284f03f2f92a7a523fe">tok_count</a></td></tr>
<tr class="separator:a8291d6284820b284f03f2f92a7a523fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ccf1359ae3f38a70a2628e7d4ce1672"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThingSet.html#a4ccf1359ae3f38a70a2628e7d4ce1672">_auth_flags</a> = TS_USR_MASK</td></tr>
<tr class="separator:a4ccf1359ae3f38a70a2628e7d4ce1672"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Main <a class="el" href="classThingSet.html">ThingSet</a> class</p>
<p>Stores and handles all data exposed to different communication interfaces </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ad0e77f5c89ae8cadd66ee745f8d530a8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ThingSet::ThingSet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDataNode.html">DataNode</a> *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize a <a class="el" href="classThingSet.html">ThingSet</a> object</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Pointer to array of <a class="el" href="structDataNode.html">DataNode</a> type containing the entire node database </td></tr>
    <tr><td class="paramname">num</td><td>Number of elements in that array </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ab44eabf502fa6063963cbd50b351e918"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ThingSet::bin_exec </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structDataNode.html">DataNode</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>pos_payload</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Execute command in binary mode (function called with a single data node name/id as argument)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parent</td><td>Pointer to executable node </td></tr>
    <tr><td class="paramname">pos_payload</td><td>Position of payload in req buffer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ab062ae679858f515a003f0eeeca5d0d2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ThingSet::bin_fetch </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structDataNode.html">DataNode</a> *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>pos_payload</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>FETCH request (binary mode)</p>
<p>Read data node values (function called with an array as argument) </p>

</div>
</div>
<a class="anchor" id="a9db5371544d495121bc2a14e9368d99e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ThingSet::bin_get </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structDataNode.html">DataNode</a> *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>values</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>ids_only</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>GET request (binary mode)</p>
<p>List child data nodes (function called without content) </p>

</div>
</div>
<a class="anchor" id="a9c796fce364430893bcc06fc6d8e5e8b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ThingSet::bin_patch </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structDataNode.html">DataNode</a> *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>pos_payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>auth_flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>sub_ch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>PATCH request (binary mode)</p>
<p>Write data node values in binary mode (function called with a map as payload)</p>
<p>If sub_ch is specified, nodes not found are silently ignored. Otherwise, a NOT_FOUND error is raised.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parent</td><td>Pointer to path / parent node or NULL to consider any node </td></tr>
    <tr><td class="paramname">pos_payload</td><td>Position of payload in req buffer </td></tr>
    <tr><td class="paramname">auth_flags</td><td>Bitset to specify authentication status for different roles </td></tr>
    <tr><td class="paramname">sub_ch</td><td>Bitset to specifiy subscribe channel to be considered, 0 to ignore </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae5f5205b807e2488ca7cf0599a130218"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ThingSet::bin_process </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Performs initial check of payload data and calls get/fetch/patch functions </p>

</div>
</div>
<a class="anchor" id="a249c640ceb791a22fc3453df5b7b3587"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ThingSet::bin_pub </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint16_t&#160;</td>
          <td class="paramname"><em>pub_ch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Generate publication message in CBOR format</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>Pointer to the buffer where the publication message should be stored </td></tr>
    <tr><td class="paramname">size</td><td>Size of the message buffer, i.e. maximum allowed length of the message </td></tr>
    <tr><td class="paramname">pub_ch</td><td>Flag to select publication channel (must match pubsub of data node)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Actual length of the message written to the buffer or 0 in case of error </dd></dl>

</div>
</div>
<a class="anchor" id="aa91369c2a5bcb8b401865a65a753bb8d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ThingSet::bin_pub_can </td>
          <td>(</td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>start_pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>pub_ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>can_dev_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t &amp;&#160;</td>
          <td class="paramname"><em>msg_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t(&amp;)&#160;</td>
          <td class="paramname"><em>msg_data</em>[8]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Encode a publication message in CAN message format for supplied data node</p>
<p>The data may only be 8 bytes long. If the actual length of a node exceeds the available length, the node is silently ignored and the function continues with the next one.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">start_pos</td><td>Position in data_nodes array to start searching This value is updated with the next node found to allow iterating over all nodes for this channel. It should be set to 0 to start from the beginning. </td></tr>
    <tr><td class="paramname">pub_ch</td><td>Flag to select publication channel (must match pubsub of data node) </td></tr>
    <tr><td class="paramname">can_dev_id</td><td>Device ID on the CAN bus </td></tr>
    <tr><td class="paramname">msg_id</td><td>reference to can message id storage </td></tr>
    <tr><td class="paramname">msg_data</td><td>reference to the buffer where the publication message should be stored</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Actual length of the message_data or -1 if not encodable / in case of error </dd></dl>

</div>
</div>
<a class="anchor" id="a737394237911cbeed76600d647cf075d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ThingSet::bin_response </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Fill the resp buffer with a CBOR response status message</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">code</td><td>Status code </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>length of status message in buffer or 0 in case of error </dd></dl>

</div>
</div>
<a class="anchor" id="a96183b7833a9101dc1d7f050e604d0e8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ThingSet::bin_sub </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>cbor_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>auth_flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>sub_ch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Update data nodes based on values provided in payload data (e.g. from other pub msg)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cbor_data</td><td>Buffer containing key/value map that should be written to the data nodes </td></tr>
    <tr><td class="paramname">len</td><td>Length of the data in the buffer </td></tr>
    <tr><td class="paramname">auth_flags</td><td>Authentication flags to be used in this function (to override _auth_flags) </td></tr>
    <tr><td class="paramname">sub_ch</td><td>Subscribe channel (as bitfield)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="classThingSet.html">ThingSet</a> status code </dd></dl>

</div>
</div>
<a class="anchor" id="aaca336b57676e947f2e01091698253ac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ThingSet::dump_json </td>
          <td>(</td>
          <td class="paramtype">node_id_t&#160;</td>
          <td class="paramname"><em>node_id</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Print all data nodes as a structured JSON text to stdout</p>
<p>WARNING: This is a recursive function and might cause stack overflows if run in constrained devices with large data node tree. Use with care and for testing only!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node_id</td><td>Root node ID where to start with printing </td></tr>
    <tr><td class="paramname">level</td><td>Indentation level (=depth inside the data node tree) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="abed56f30c7614d2c5231c2201b33be88"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structDataNode.html">DataNode</a> *const ThingSet::get_endpoint </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the endpoint node of a provided path</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>Path with multiple node names separated by forward slash </td></tr>
    <tr><td class="paramname">len</td><td>Length of the entire path</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to data node or NULL if node is not found </dd></dl>

</div>
</div>
<a class="anchor" id="a1c63da204a79bf3c9b9314eae21cd62d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structDataNode.html">DataNode</a> *const ThingSet::get_node </td>
          <td>(</td>
          <td class="paramtype">node_id_t&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get data node by ID</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>Node ID</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to data node or NULL if node is not found </dd></dl>

</div>
</div>
<a class="anchor" id="a7f8a5788831fb678e24af134e90a375c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structDataNode.html">DataNode</a> *const ThingSet::get_node </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>parent</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get data node by name</p>
<p>As the names are not necessarily unique in the entire data tree, the parent is needed</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>Node name </td></tr>
    <tr><td class="paramname">len</td><td>Length of the node name </td></tr>
    <tr><td class="paramname">parent</td><td>Node ID of the parent or -1 for global search</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to data node or NULL if node is not found </dd></dl>

</div>
</div>
<a class="anchor" id="ae5677bceee74101e3a5221d28643fc7c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ThingSet::json_deserialize_value </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">jsmntype_t&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structDataNode.html">DataNode</a> *&#160;</td>
          <td class="paramname"><em>node</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Deserialize a node value from a JSON string</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>Pointer to the position of the value in a buffer </td></tr>
    <tr><td class="paramname">len</td><td>Length of value in the buffer </td></tr>
    <tr><td class="paramname">type</td><td>Type of the JSMN token as identified by the parser </td></tr>
    <tr><td class="paramname">node</td><td>Pointer to node where the deserialized value should be stored</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of tokens processed (always 1) or 0 in case of error </dd></dl>

</div>
</div>
<a class="anchor" id="ae59ffb306312fb11041e7508598fe3f2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ThingSet::json_serialize_name_value </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structDataNode.html">DataNode</a> *&#160;</td>
          <td class="paramname"><em>node</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Serialize node name and value as JSON object</p>
<p>same as json_serialize_value, just that the node name is also serialized </p>

</div>
</div>
<a class="anchor" id="a9e15c09d2db7a66c95ac38aa3ba0d690"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ThingSet::json_serialize_value </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structDataNode.html">DataNode</a> *&#160;</td>
          <td class="paramname"><em>node</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Serialize a node value into a JSON string</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>Pointer to the buffer where the JSON value should be stored </td></tr>
    <tr><td class="paramname">size</td><td>Size of the buffer, i.e. maximum allowed length of the value </td></tr>
    <tr><td class="paramname">node</td><td>Pointer to node which should be serialized</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Length of data written to buffer or 0 in case of error </dd></dl>

</div>
</div>
<a class="anchor" id="a58ea7684325617d69877eca2742e7a2d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ThingSet::process </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>req_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>resp_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Process <a class="el" href="classThingSet.html">ThingSet</a> request</p>
<p>This function also detects if JSON or CBOR format is used</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>Pointer to the <a class="el" href="classThingSet.html">ThingSet</a> request buffer </td></tr>
    <tr><td class="paramname">req_len</td><td>Length of the data in the request buffer </td></tr>
    <tr><td class="paramname">response</td><td>Pointer to the buffer where the <a class="el" href="classThingSet.html">ThingSet</a> response should be stored </td></tr>
    <tr><td class="paramname">resp_size</td><td>Size of the response buffer, i.e. maximum allowed length of the response</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Actual length of the response written to the buffer or 0 in case of error </dd></dl>

</div>
</div>
<a class="anchor" id="a1fbc26746589326ce1268b2a8ded711d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ThingSet::set_authentication </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>flags</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Sets current authentication level</p>
<p>The authentication flags must match with access flags specified in <a class="el" href="structDataNode.html">DataNode</a> to allow read/write access to a data node.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flags</td><td>Flags to define authentication level (1 = access allowed) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a61e40c5206c4ce45b86965a65f6e22db"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ThingSet::txt_create </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structDataNode.html">DataNode</a> *&#160;</td>
          <td class="paramname"><em>node</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>POST request to append data </p>

</div>
</div>
<a class="anchor" id="a9f0ba86633385e312a5e8625199acb3e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ThingSet::txt_delete </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structDataNode.html">DataNode</a> *&#160;</td>
          <td class="paramname"><em>node</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>DELETE request to delete data from node </p>

</div>
</div>
<a class="anchor" id="aa904404d23fc65444527c9e27af06719"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ThingSet::txt_exec </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structDataNode.html">DataNode</a> *&#160;</td>
          <td class="paramname"><em>node</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Execute command in text mode (function called with a single data node name as argument) </p>

</div>
</div>
<a class="anchor" id="addb80c0d2f3bf53946e07de39ce94fa4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ThingSet::txt_fetch </td>
          <td>(</td>
          <td class="paramtype">node_id_t&#160;</td>
          <td class="paramname"><em>parent_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>FETCH request (text mode)</p>
<p>Read data node values (function called with an array as argument) </p>

</div>
</div>
<a class="anchor" id="a4a2c13600f01dee4f4ef570b06d1248c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ThingSet::txt_get </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structDataNode.html">DataNode</a> *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>include_values</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>GET request (text mode)</p>
<p>List child data nodes (function called without content / parameters) </p>

</div>
</div>
<a class="anchor" id="a873145210e2981bbdd165a31c3c77c72"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ThingSet::txt_patch </td>
          <td>(</td>
          <td class="paramtype">node_id_t&#160;</td>
          <td class="paramname"><em>parent_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>PATCH request (text mode)</p>
<p>Write data node values in text mode (function called with a map as argument) </p>

</div>
</div>
<a class="anchor" id="a7f43e789d44edb00566cbbff40e88901"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ThingSet::txt_process </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Prepares JSMN parser, performs initial check of payload data and calls get/fetch/patch functions </p>

</div>
</div>
<a class="anchor" id="a76b1ba323d6a9d29c50170bd487a85f2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ThingSet::txt_pub </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint16_t&#160;</td>
          <td class="paramname"><em>pub_ch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Generate publication message in JSON format</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>Pointer to the buffer where the publication message should be stored </td></tr>
    <tr><td class="paramname">size</td><td>Size of the message buffer, i.e. maximum allowed length of the message </td></tr>
    <tr><td class="paramname">pub_ch</td><td>Flag to select publication channel (must match pubsub of data node)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Actual length of the message written to the buffer or 0 in case of error </dd></dl>

</div>
</div>
<a class="anchor" id="ab9eec5c4cb28659c71e2cfafdd922c82"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ThingSet::txt_response </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Fill the resp buffer with a JSON response status message</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">code</td><td>Status code </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>length of status message in buffer or 0 in case of error </dd></dl>

</div>
</div>
<h2 class="groupheader">Field Documentation</h2>
<a class="anchor" id="a4ccf1359ae3f38a70a2628e7d4ce1672"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t ThingSet::_auth_flags = TS_USR_MASK</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Stores current authentication status (authentication as "normal" user as default) </p>

</div>
</div>
<a class="anchor" id="acf513ed2020ca84486cec42ddd1ab44c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structDataNode.html">DataNode</a>* ThingSet::data_nodes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Array of nodes database provided during initialization </p>

</div>
</div>
<a class="anchor" id="af01ce89b91046f038ca4323491ba1c6c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* ThingSet::json_str</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Pointer to the start of JSON payload in the request </p>

</div>
</div>
<a class="anchor" id="a6317041297961833e518cef07accc937"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t ThingSet::num_nodes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Number of nodes in the data_nodes array </p>

</div>
</div>
<a class="anchor" id="a67a2efd895161f6deb533fad60fbf789"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* ThingSet::req</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Pointer to request buffer (provided in process function) </p>

</div>
</div>
<a class="anchor" id="a25a5f618bc4d84f1e5c60cd92d67d48d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t ThingSet::req_len</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Length of the request </p>

</div>
</div>
<a class="anchor" id="a1ccc8a63ad5208743a7950239f58bdbb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* ThingSet::resp</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Pointer to response buffer (provided in process function) </p>

</div>
</div>
<a class="anchor" id="ae81f4618d6ab0d822d53fef844820162"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t ThingSet::resp_size</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Size of response buffer (i.e. maximum length) </p>

</div>
</div>
<a class="anchor" id="a8291d6284820b284f03f2f92a7a523fe"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ThingSet::tok_count</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Number of JSON tokens parsed by JSMN </p>

</div>
</div>
<a class="anchor" id="a3c1b8fb1d4af283b24cee6079e87ecf8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structjsmntok__t.html">jsmntok_t</a> ThingSet::tokens[TS_NUM_JSON_TOKENS]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>JSON tokes in json_str parsed by JSMN </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="thingset_8h_source.html">thingset.h</a></li>
<li>src/thingset.cpp</li>
<li>src/thingset_bin.cpp</li>
<li>src/thingset_txt.cpp</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classThingSet.html">ThingSet</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
